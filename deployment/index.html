<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Hewlett Packard Enterprise" /><link rel="canonical" href="https://hpe-storage.github.io/array-exporter/deployment/index.html" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="HPE Storage Array Exporter for Prometheus"/>
    <meta property="og:description" content="The HPE Storage Array Exporter for Prometheus provides observability for an HPE storage system via the Prometheus metric format."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://hpe-storage.github.io/array-exporter"/>
    <meta property="og:type" content="website"/>
    
    <title>Deployment - HPE Storage Array Exporter for Prometheus</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../css/hpedev.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Deployment";
        var mkdocs_page_input_path = "deployment/index.md";
        var mkdocs_page_url = "/array-exporter/deployment/index.html";
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> HPE Storage Array Exporter for Prometheus
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">GET STARTED</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../releases/index.html">Releases</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="index.html">Deployment</a>
    <ul class="current">
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../metrics/index.html">Metrics</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../integration/index.html">Prometheus Integration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../grafana/index.html">Grafana Dashboards</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">COMMUNITY</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="https://developer.hpe.com">HPE Developer Community</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://developer.hpe.com/slack-signup/">Sign up to HPE Developer on Slack</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://github.com/hpe-storage/array-exporter/issues/new?title=I have some feedback on the Array Exporter">Got feedback?</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/eula/index.html">End User License Agreement</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/notices/index.html">Notices</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/support/index.html">Support</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">HPE Storage Array Exporter for Prometheus</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>GET STARTED &raquo;</li>
      <li>Deployment</li>
    <li class="wy-breadcrumbs-aside">
        <a href="https://github.com/hpe-storage/array-exporter/edit/master/docs/deployment/index.md"> Edit on hpe-storage/array-exporter</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <p>An HPE Storage Array Exporter for Prometheus deployment provides Prometheus metrics for a single storage system. A deployment can use an executable file or a container image.</p>
<div class="toc">
<ul>
<li><a href="#configuration">Configuration</a></li>
<li><a href="#command_options">Command Options</a></li>
<li><a href="#using_an_executable_file">Using an Executable File</a><ul>
<li><a href="#command_example">Command Example</a></li>
</ul>
</li>
<li><a href="#using_a_container_image">Using a Container Image</a><ul>
<li><a href="#docker_example">Docker Example</a></li>
</ul>
</li>
<li><a href="#using_a_kubernetes_deployment">Using a Kubernetes Deployment</a></li>
</ul>
</div>
<h1 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">&para;</a></h1>
<p>The address and credentials of the target storage system must be specified in a configuration file, using the format shown in this example <code>storage-system.yaml</code> file.</p>
<p> <pre><code class=markdown>address: 10.10.10.1
username: exampleuser
password: examplepassword
</code></pre></p>
<p>The <code>address</code> value is either a resolvable hostname or IP address of the management interface on the storage system. The <code>username</code> value identifies a storage system user with privileges described below.</p>
<table>
<thead>
<tr>
<th align="left">Storage System</th>
<th align="left">User Type</th>
<th align="left">Minimal Role</th>
<th align="left">Open Ports Requirements</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">HPE Alletra Storage MP Block, Alletra 9000, Primera, 3PAR</td>
<td align="left">System User</td>
<td align="left">Browse</td>
<td align="left">22, 443</td>
</tr>
<tr>
<td align="left">HPE Alletra 5000/6000, Nimble Storage</td>
<td align="left">System User</td>
<td align="left">Guest</td>
<td align="left">5392</td>
</tr>
<tr>
<td align="left">HPE Alletra 5000/6000, Nimble Storage<sup>1</sup></td>
<td align="left">Tenant</td>
<td align="left">N/A</td>
<td align="left">443, 5392</td>
</tr>
</tbody>
</table>
<p><sup>1</sup> = NimbleOS 6.0 and above only.</p>
<h1 id="command_options">Command Options<a class="headerlink" href="#command_options" title="Permanent link">&para;</a></h1>
<table>
<thead>
<tr>
<th align="left">Option</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">--accept-eula</td>
<td align="left">false</td>
<td align="left">Confirms your acceptance of the <a href="../legal/eula/index.html">HPE license restrictions</a></td>
</tr>
<tr>
<td align="left">--log.path</td>
<td align="left"><em>None</em></td>
<td align="left">A file location to write log messages, in addition to stdout</td>
</tr>
<tr>
<td align="left">--metrics.disable-introspection</td>
<td align="left">false</td>
<td align="left">Excludes metrics about the metrics provider itself, with prefixes such as <code>promhttp</code>, <code>process</code>, and <code>go</code></td>
</tr>
<tr>
<td align="left">--telemetry.addr</td>
<td align="left">:8080</td>
<td align="left">The host:port address at which to provide metrics</td>
</tr>
<tr>
<td align="left">--telemetry.path</td>
<td align="left">/metrics</td>
<td align="left">The endpoint path at which to provide metrics</td>
</tr>
</tbody>
</table>
<h1 id="using_an_executable_file">Using an Executable File<a class="headerlink" href="#using_an_executable_file" title="Permanent link">&para;</a></h1>
<p>A Linux executable file is provided through GitHub <a href="https://github.com/hpe-storage/array-exporter/releases">releases</a>.</p>
<p>When an executable file has been copied to your server, it can be invoked with this command syntax:</p>
<p> <pre><code class=markdown>hpe-array-exporter [OPTION]... CONFIG-PATH
</code></pre></p>
<p>Available OPTIONs are described in the <a href="#command_options">Command Options</a> section.</p>
<p>CONFIG-PATH is the location of the storage system <a href="#configuration">configuration</a> file.</p>
<h2 id="command_example">Command Example<a class="headerlink" href="#command_example" title="Permanent link">&para;</a></h2>
<p> <pre><code class=markdown>./hpe-array-exporter --log.path=/var/log/hpe-array-exporter.log /etc/config/storage-system.yaml
</code></pre></p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Include the <code>--accept-eula</code> option or set the environment variable <code>ACCEPT_HPE_STANDARD_EULA=yes</code> to confirm your acceptance of the <a href="../legal/eula/index.html">HPE license restrictions</a>.</p>
</div>
<h1 id="using_a_container_image">Using a Container Image<a class="headerlink" href="#using_a_container_image" title="Permanent link">&para;</a></h1>
<p>A container image is hosted at <code>quay.io/hpestorage/array-exporter:v1.0.3</code>, with v1.0.3 replaced by the desired release version.</p>
<p>When deploying the array exporter as a container, the configuration file must be mounted as a volume.</p>
<p>Available options, including the <code>--log.path</code> used in the example below, are described in the <a href="#command_options">Command Options</a> section.</p>
<h2 id="docker_example">Docker Example<a class="headerlink" href="#docker_example" title="Permanent link">&para;</a></h2>
<p>In this example, the configuration file at <code>/tmp/storage-system.yaml</code> is bound to the container's <code>/etc/config/</code> directory as a volume using Docker's <code>-v</code> command option. The configuration file location inside the container is then given as a command argument. In addition, the <code>-p</code> option is used to map the container's port 8080 to port 9090 on the Docker host.</p>
<p> <pre><code class=markdown>docker run -it --name hpe-array-exporter -p 9090:8080 \
     -v /tmp/storage-system.yaml:/etc/config/storage-system.yaml \
     quay.io/hpestorage/array-exporter:v1.0.3 \
     --log.path /var/log/hpe-array-exporter.log \
     /etc/config/storage-system.yaml
</code></pre></p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Include the <code>--accept-eula</code> option or set the environment variable <code>ACCEPT_HPE_STANDARD_EULA=yes</code> to confirm your acceptance of the <a href="/legal/eula/index.html">HPE license restrictions</a>.</p>
</div>
<p>Consult the <a href="https://docs.docker.com/engine/reference/commandline/run/">Docker command line documentation</a> for more information on running containers using Docker.</p>
<h1 id="using_a_kubernetes_deployment">Using a Kubernetes Deployment<a class="headerlink" href="#using_a_kubernetes_deployment" title="Permanent link">&para;</a></h1>
<p>Kubernetes deployment facilities are hosted in the <a href="https://github.com/hpe-storage/co-deployments">co-deployments repository</a>, including a <a href="https://artifacthub.io/packages/helm/hpe-storage/hpe-array-exporter/">Helm chart</a> (via Artifact Hub) and sample <a href="https://github.com/hpe-storage/co-deployments/tree/master/yaml/array-exporter">YAML files</a>.</p>
              
            </div>
          </div>

<footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../metrics/index.html" class="btn btn-neutral float-right" title="Metrics">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../releases/index.html" class="btn btn-neutral" title="Releases"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright 2023 Hewlett Packard Enterprise Development LP</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../releases/index.html" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../metrics/index.html" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
